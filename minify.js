var answers=[];!function(){"use strict";window.loaded=!1;var e="",t="",n=0,s="",r="",o=0;setInterval((function(){try{if(document.getElementById("answerLeak")||(document.getElementsByClassName("_1cb4xo4NaN")[0].innerHTML+="<t id='answerLeak'></t>"),document.getElementById("answerLeak").style=" background: navy;color: white;padding: 5px;border-radius: 5px;position: absolute;top: 17%;left: 1%;z-index:100;",null==answers[n-o])return void(document.getElementById("answerLeak").innerHTML="Unable to help with this<br> assignment/question.<br>Please press the<br>'Start over' button or <br>choose a different<br> assignment.");null!=answers[n-o]&&answers[n-o]!=t&&(t=answers[n-o],console.log(`%cAcceptable Answers:\n${answers[n-o]}`,"color: coral; -webkit-text-stroke: .5px black; font-size:24px; font-weight:bold;")),setTimeout((function(){for(var e=t.split("\n"),n=0;n<e.length;n++)for(var s=document.getElementsByClassName("checkbox-and-option _tqugjn"),r=0;r<s.length;r++)s[r].innerHTML.includes(e[n])&&(s[r].style.border="2px solid lime")}),300);var e="Acceptable Answers:<br>"+t.replaceAll("\n","<br>");if(t.includes("https:")||t.includes("web+graphie")){var i=t.split("\n");e="";for(var a=0;a<i.length;a++){var l=i[a].substr(i[a].indexOf("(")+1,i[a].indexOf(")")-i[a].indexOf("(")-1);l.includes("web+graphie")&&(l=l.replace("web+graphie","https")+".svg"),e+=`<img src='${l}'/><br>`}}if(document.getElementById("answerLeak").innerHTML!=e&&(document.getElementById("answerLeak").innerHTML=e),document.getElementsByClassName("_g20yn58")[2].firstChild.innerHTML.includes("problems"))o=1,n=1;else{if(0==o)for(o=parseFloat(document.getElementsByClassName("_g20yn58")[2].firstChild.innerHTML.split(" ")[0]);null==o;)o=parseFloat(document.getElementsByClassName("_g20yn58")[2].firstChild.innerHTML.split(" ")[0]);n=parseFloat(document.getElementsByClassName("_g20yn58")[2].firstChild.innerHTML.split(" ")[0])}r==s&&""==s&&(r=document.getElementsByClassName("_qts7xbw")[0].innerHTML,s=r),(r=document.getElementsByClassName("_qts7xbw")[0].innerHTML)!=s&&(console.clear(),s=r,o=1,n=1,answers.length>2&&answers.splice(0,answers.length-2))}catch(e){}}),200);class i{constructor(e,t){this.body=e,this.type=t}get isMultiChoice(){return"multiple_choice"==this.type}get isFreeResponse(){return"free_response"==this.type}get isExpression(){return"expression"==this.type}get isDropdown(){return"dropdown"==this.type}log(){const t=this.body;t.map((e=>{"string"==typeof e&&(t[t.indexOf(e)]=e.replaceAll("$",""))}));const n=t.join("\n");n&&e!=n&&(answers.push(n),e=n)}}const a=window.fetch;function l(e){const t=Object.values(e.widgets).map((e=>{if(e.options?.answers)return e.options.answers.map((e=>{if("correct"==e.status)return e.value}))})).flat().filter((e=>void 0!==e));return new i(t,"free_response")}function c(e){const t=Object.values(e.widgets).map((e=>{if(e.options?.choices)return e.options.choices.map((e=>{if(e.correct)return e.content}))})).flat().filter((e=>void 0!==e));return new i(t,"multiple_choice")}function u(e){const t=Object.values(e.widgets).map((e=>{if(e.options?.answerForms)return e.options.answerForms.map((e=>{if(Object.values(e).includes("correct"))return e.value}))})).flat();return new i(t,"expression")}function d(e){const t=Object.values(e.widgets).map((e=>{if(e.options?.choices)return e.options.choices.map((e=>{if(e.correct)return e.content}))})).flat();return new i(t,"dropdown")}window.fetch=function(){return a.apply(this,arguments).then((e=>{if(e.url.includes("/getAssessmentItem")){e.clone().json().then((e=>{let t,n;try{t=e.data.assessmentItem.item.itemData,n=JSON.parse(t).question}catch{let e=()=>localStorage.getItem("error_iter")||0;return localStorage.setItem("error_iter",e()+1),e()<4?location.reload():console.log("%c An error occurred","color: red; font-weight: bolder; font-size: 20px;")}n&&Object.keys(n.widgets).map((e=>{switch(e.split(" ")[0]){case"numeric-input":return l(n).log();case"radio":return c(n).log();case"expression":return u(n).log();case"dropdown":return d(n).log()}}))}))}return window.loaded||(console.clear(),alert("Khan Academy Answer Revealer Activated"),window.loaded=!0),e}))}}();
